[gd_scene load_steps=15 format=3 uid="uid://ct023jb2thb8k"]

[ext_resource type="PackedScene" uid="uid://c6si2xv6e6554" path="res://camera/main_camera.tscn" id="1_t46fc"]
[ext_resource type="Script" path="res://importers/TokenImporter.cs" id="3_74368"]
[ext_resource type="Script" path="res://importers/TileImporter.cs" id="4_8moaj"]
[ext_resource type="PackedScene" uid="uid://kutlfysjtty0" path="res://ui/brackets.tscn" id="5_6l0yx"]
[ext_resource type="Script" path="res://importers/WallImporter.cs" id="5_idabi"]
[ext_resource type="Script" path="res://token_manipulation/SelectionTool.cs" id="5_src1c"]
[ext_resource type="PackedScene" uid="uid://bfxa2blbu7j0b" path="res://ui/ui.tscn" id="6_o0ab3"]
[ext_resource type="Script" path="res://token_manipulation/ResizingTool.cs" id="7_q5wlv"]
[ext_resource type="Script" path="res://token_manipulation/DraggingTool.cs" id="7_ssxb7"]
[ext_resource type="Script" path="res://painters/TilePainter.cs" id="10_07saq"]
[ext_resource type="Script" path="res://maps/TileMap.cs" id="10_qojat"]
[ext_resource type="Texture2D" uid="uid://bht016ll8v3jl" path="res://assets/wall_cursor.png" id="11_fy1bw"]
[ext_resource type="Script" path="res://painters/WallPainter.cs" id="12_tjfu5"]
[ext_resource type="Script" path="res://maps/TokenMap.cs" id="13_mch7r"]

[node name="Main" type="Node"]

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="UI" parent="CanvasLayer" instance=ExtResource("6_o0ab3")]
size_flags_horizontal = 8

[node name="Camera2D" parent="." node_paths=PackedStringArray("_uiCanvas") instance=ExtResource("1_t46fc")]
scale = Vector2(0.860892, 1.03784)
zoom = Vector2(3, 3)
ZoomSpeed = 5.0
_uiCanvas = NodePath("../CanvasLayer/UI")

[node name="TokenImporter" type="Node2D" parent="."]
script = ExtResource("3_74368")

[node name="TileImporter" type="Node2D" parent="."]
script = ExtResource("4_8moaj")

[node name="WallImporter" type="Node2D" parent="."]
script = ExtResource("5_idabi")

[node name="SelectionTool" type="Node2D" parent="." node_paths=PackedStringArray("_world", "_uiCanvas", "_draggingTool", "_resizingTool")]
script = ExtResource("5_src1c")
_world = NodePath("../World")
_uiCanvas = NodePath("../CanvasLayer/UI")
_draggingTool = NodePath("DraggingTool")
_resizingTool = NodePath("ResizingTool")

[node name="DraggingTool" type="Node2D" parent="SelectionTool" node_paths=PackedStringArray("_selectionTool")]
script = ExtResource("7_ssxb7")
_selectionTool = NodePath("..")

[node name="ResizingTool" type="Node2D" parent="SelectionTool" node_paths=PackedStringArray("_selectionTool", "_brackets")]
script = ExtResource("7_q5wlv")
_selectionTool = NodePath("..")
_brackets = NodePath("Brackets")

[node name="Brackets" parent="SelectionTool/ResizingTool" node_paths=PackedStringArray("_mainCamera") instance=ExtResource("5_6l0yx")]
visible = false
_mainCamera = NodePath("../../../Camera2D")

[node name="TileMap" type="Node2D" parent="."]
script = ExtResource("10_qojat")

[node name="TilePainter" type="Node2D" parent="." node_paths=PackedStringArray("_ui", "_importer", "_cursorSprite", "_world", "_tileGenerator")]
script = ExtResource("10_07saq")
_ui = NodePath("../CanvasLayer/UI")
_importer = NodePath("../TileImporter")
_cursorSprite = NodePath("TileCursor")
_world = NodePath("../World")
_tileGenerator = NodePath("../TileMap")

[node name="TileCursor" type="Sprite2D" parent="TilePainter"]

[node name="WallPainter" type="Node2D" parent="." node_paths=PackedStringArray("_ui", "_importer", "_cursor", "_world", "_tileGenerator")]
script = ExtResource("12_tjfu5")
_ui = NodePath("../CanvasLayer/UI")
_importer = NodePath("../WallImporter")
_cursor = NodePath("WallCursor")
_world = NodePath("../World")
_tileGenerator = NodePath("../TileMap")

[node name="WallCursor" type="Sprite2D" parent="WallPainter"]
texture = ExtResource("11_fy1bw")
offset = Vector2(0, -7.5)

[node name="World" type="Node2D" parent="." node_paths=PackedStringArray("_tokenImporter", "_selectionTool")]
y_sort_enabled = true
script = ExtResource("13_mch7r")
_tokenImporter = NodePath("../TokenImporter")
_selectionTool = NodePath("../SelectionTool")
metadata/_edit_lock_ = true

[connection signal="MouseEnterBracket" from="SelectionTool/ResizingTool/Brackets" to="SelectionTool" method="OnResizeBoxEnter"]
[connection signal="MouseExitBracket" from="SelectionTool/ResizingTool/Brackets" to="SelectionTool" method="OnResizeBoxExit"]
